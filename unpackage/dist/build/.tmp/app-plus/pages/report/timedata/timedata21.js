(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/timedata/timedata21"],{"03fe":function(t,a,e){"use strict";e.r(a);var o=e("da24"),n=e("b876");for(var s in n)"default"!==s&&function(t){e.d(a,t,function(){return n[t]})}(s);e("3a07");var i=e("2877"),r=Object(i["a"])(n["default"],o["a"],o["b"],!1,null,null,null);a["default"]=r.exports},"33b5":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o,n=e("2f62");function s(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.forEach(function(a){i(t,a,e[a])})}return t}function i(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var r={onLoad:function(){o=this,t.getSystemInfo({success:function(t){200,o.pixelRatio=2}}),this.getQuInfo()},computed:s({},(0,n.mapState)(["userInfo"])),data:function(){return{title:"picker",areaList:[],areaName:"",areaIndex:0,areaId:"",schoolList:[],schoolName:"",schoolIndex:0,schoolId:"",listData:[],pixelRatio:2}},onReady:function(){},methods:{getQuInfo:function(){o.http.get("smartPhone/getQuInfoByUserId",{userId:this.userInfo.userId}).then(function(t){if(200===t.data.code){if(o.areaList=t.data.data.list,o.areaList.length>0){var a=o.areaList[0];o.areaName=a.fsiteName,o.areaId=a.fsiteNo}o.getSchools()}else o.util.showToast(t.data.msg)})},getSchools:function(){""!==this.areaId&&this.http.get("smartPhone/getSchoolInfo",{fsiteNo:o.areaId,userId:this.userInfo.userId}).then(function(t){if(200===t.data.code){if(o.schoolList=t.data.data.list,o.schoolList.length>0){var a=o.schoolList[0];o.schoolName=a.fsiteName,o.schoolId=a.fsiteNo}o.showDate()}else o.util.showToast(t.data.msg)})},areaChange:function(t){if(this.areaId!==t.target.value){var a=this.areaList[t.target.value];this.areaName=a.fsiteName,this.areaId=a.fsiteNo,this.areaIndex=t.target.value,this.getSchools()}},schoolChange:function(t){if(this.schoolId!==t.target.value){var a=this.schoolList[t.target.value];this.schoolName=a.fsiteName,this.schoolId=a.fsiteNo,this.schoolIndex=t.target.value,this.showDate()}},setPageTitle:function(){t.setNavigationBarTitle({title:"".concat(this.areaName," ").concat(this.schoolName," 实时监控")})},showDate:function(){this.setPageTitle(),this.showCharts(),o.http.get("smartPhone/getZongzhanAirAqi",{fsiteNo:this.schoolId}).then(function(t){200===t.data.code?o.listData=t.data.data.list:o.util.showToast(t.data.msg)})},showCharts:function(){o.http.get("smartPhone/getOftenAirAqiByFsiteNo",{fsiteNo:this.schoolId}).then(function(a){if(200===a.data.code){o.pixelRatio,t.upx2px(10),t.upx2px(200),t.upx2px(150);var e=a.data.data.list;if(e&&1===e.length){var n=e[0],s=[{name:"PM2.5",data:o.util.percentage(n.fpm25)}],i=[{name:"PM10",data:o.util.percentage(n.fpm10)}],r=[{name:"甲醛",data:o.util.percentage(n.fjq)}],c=[{name:"挥发性有机物",data:o.util.percentage(n.fyjw)}],h=[{name:"温度",data:o.util.percentage(n.fsd2)}],u=[{name:"湿度",data:o.util.percentage(n.fwd2)}];o._showCharts("chartpm25",s),o._showCharts("chartpm10",i),o._showCharts("charthcho",r),o._showCharts("charttvoc",c),o._showCharts("charth",h),o._showCharts("chartw",u)}}else o.util.showToast(a.data.msg)})},_showCharts:function(a,e){var n=o.pixelRatio,s=t.upx2px(10),i=t.upx2px(200),r=t.upx2px(150);o.util.showChartGauge(a,e,n,s,i,r)},goDetail:function(a,e){var o={id:a,orgName:e};t.navigateTo({url:"timedata22?detail="+encodeURIComponent(JSON.stringify(o))})}}};a.default=r}).call(this,e("6e42")["default"])},"3a07":function(t,a,e){"use strict";var o=e("bba7"),n=e.n(o);n.a},b876:function(t,a,e){"use strict";e.r(a);var o=e("33b5"),n=e.n(o);for(var s in o)"default"!==s&&function(t){e.d(a,t,function(){return o[t]})}(s);a["default"]=n.a},bba7:function(t,a,e){},da24:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement;t._self._c},n=[];e.d(a,"a",function(){return o}),e.d(a,"b",function(){return n})}},[["957a","common/runtime","common/vendor"]]]);