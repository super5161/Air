(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/timedata/timedata21"],{"03fe":function(t,e,a){"use strict";a.r(e);var o=a("b7a5"),s=a("b876");for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);a("3a07");var n=a("2877"),r=Object(n["a"])(s["default"],o["a"],o["b"],!1,null,null,null);e["default"]=r.exports},"33b5":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,s=a("2f62");function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},o=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),o.forEach(function(e){n(t,e,a[e])})}return t}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r={onLoad:function(){o=this,t.getSystemInfo({success:function(t){200,o.pixelRatio=2}}),this.getQuInfo()},computed:i({},(0,s.mapState)(["userInfo"])),data:function(){return{title:"picker",areaList:[],areaName:"",areaIndex:0,areaId:"",schoolList:[],schoolName:"",schoolIndex:0,schoolId:"",listData:[],pixelRatio:2}},onReady:function(){},methods:{getQuInfo:function(){o.http.get("smartPhone/getQuInfoByUserId",{userId:this.userInfo.userId},{baseUrl:this.$sys.getApiUrl()}).then(function(t){if(200===t.data.code){if(o.areaList=t.data.data.list,o.areaList.length>0){var e=o.areaList[0];o.areaName=e.fsiteName,o.areaId=e.fsiteNo}o.getSchools()}else o.util.showToast(t.data.msg)})},getSchools:function(){""!==this.areaId&&this.http.get("smartPhone/getSchoolInfo",{fsiteNo:o.areaId,userId:this.userInfo.userId},{baseUrl:this.$sys.getApiUrl()}).then(function(t){if(200===t.data.code){if(o.schoolList=t.data.data.list,o.schoolList.length>0){var e=o.schoolList[0];o.schoolName=e.fsiteName,o.schoolId=e.fsiteNo}o.showDate()}else o.util.showToast(t.data.msg)})},areaChange:function(t){if(this.areaId!==t.target.value){var e=this.areaList[t.target.value];this.areaName=e.fsiteName,this.areaId=e.fsiteNo,this.areaIndex=t.target.value,this.getSchools()}},schoolChange:function(t){if(this.schoolId!==t.target.value){var e=this.schoolList[t.target.value];this.schoolName=e.fsiteName,this.schoolId=e.fsiteNo,this.schoolIndex=t.target.value,this.showDate()}},setPageTitle:function(){t.setNavigationBarTitle({title:"".concat(this.areaName," ").concat(this.schoolName," 实时监控")})},showDate:function(){this.setPageTitle(),this.showCharts(),o.http.get("smartPhone/getZongzhanAirAqi",{fsiteNo:this.schoolId},{baseUrl:this.$sys.getApiUrl()}).then(function(t){200===t.data.code?o.listData=t.data.data.list:o.util.showToast(t.data.data)})},showCharts:function(){o.http.get("smartPhone/getOftenAirAqiByFsiteNo",{fsiteNo:this.schoolId},{baseUrl:this.$sys.getApiUrl()}).then(function(e){if(200===e.data.code){o.pixelRatio,t.upx2px(10),t.upx2px(200),t.upx2px(150);var a=e.data.data.list;if(a&&1===a.length){var s=a[0],i=[{name:"PM2.5",data:o.util.percentage(s.fpm25)}],n=[{name:"PM10",data:o.util.percentage(s.fpm10)}],r=[{name:"甲醛",data:o.util.percentage(s.fjq)}],h=[{name:"挥发性有机物",data:o.util.percentage(s.fyjw)}],c=[{name:"温度",data:o.util.percentage(s.fsd2)}],l=[{name:"湿度",data:o.util.percentage(s.fwd2)}];o._showCharts("chartpm25",i),o._showCharts("chartpm10",n),o._showCharts("charthcho",r),o._showCharts("charttvoc",h),o._showCharts("charth",c),o._showCharts("chartw",l)}}else o.util.showToast(e.data.msg)})},_showCharts:function(e,a){var s=o.pixelRatio,i=t.upx2px(10),n=t.upx2px(200),r=t.upx2px(150);o.util.showChartGauge(e,a,s,i,n,r)},goDetail:function(e,a){var o={id:e,orgName:a};t.navigateTo({url:"timedata22?detail="+encodeURIComponent(JSON.stringify(o))})}}};e.default=r}).call(this,a("6e42")["default"])},"3a07":function(t,e,a){"use strict";var o=a("bba7"),s=a.n(o);s.a},b7a5:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},s=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return s})},b876:function(t,e,a){"use strict";a.r(e);var o=a("33b5"),s=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=s.a},bba7:function(t,e,a){}},[["957a","common/runtime","common/vendor"]]]);