(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/report/daydata/daydata22"],{"2ff6":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=(t._self._c,t.__map(t.listData,function(e,a){var r=t._f("intFielter")(e.faqi),n=t._f("emptyFielter")(e.faqiType),i=t._f("emptyFielter")(e.fcontaminants);return{$orig:t.__get_orig(e),f0:r,f1:n,f2:i}}));t.$mp.data=Object.assign({},{$root:{l0:a}})},n=[];a.d(e,"a",function(){return r}),a.d(e,"b",function(){return n})},4855:function(t,e,a){"use strict";var r=a("6a49"),n=a.n(r);n.a},"61cf":function(t,e,a){"use strict";a.r(e);var r=a("ba17"),n=a.n(r);for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);e["default"]=n.a},"6a49":function(t,e,a){},"9e44":function(t,e,a){"use strict";a.r(e);var r=a("2ff6"),n=a("61cf");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("4855");var o=a("2877"),s=Object(o["a"])(n["default"],r["a"],r["b"],!1,null,null,null);e["default"]=s.exports},ba17:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,n,i=a("2f62");function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach(function(e){s(t,e,a[e])})}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u=function(){return Promise.all([a.e("common/vendor"),a.e("components/w-picker/w-picker")]).then(a.bind(null,"7099"))},c={components:{wPicker:u},computed:o({mode:function(){return this.tabList[this.tabIndex].mode},defaultVal:function(){return this.tabList[this.tabIndex].value},year:function(){var t=this.sdate.split(" ");return t[0]},quarter:function(){var t=this.sdate.split(" ");return this.getQuarterNumber(t[1])}},(0,i.mapState)(["userInfo"])),onLoad:function(e){var a;r=this;try{a=JSON.parse(decodeURIComponent(e.detail))}catch(o){}var i=this.userInfo;this.orgId=a?a.id:i.orgNo,this.orgName=a?a.orgName:i.orgName,this.sdate=a?a.date:this.getNowYearQuarter(),this.setPageTitle(),this.loadwPicker(),t.getSystemInfo({success:function(t){n=t.screenWidth-10}})},data:function(){return{orgId:"",orgName:"",sdate:this.getNowYearQuarter(),tabList:[{mode:"yearQuarter",name:"年季",value:[0,0]}],tabIndex:0,listData:[]}},onReady:function(){r.getListData(),r.getChartData()},methods:{toggleTab:function(t){this.tabIndex=t,this.$refs.picker.show()},onConfirm:function(t){this.sdate=t.result.replace("-"," "),this.setPageTitle(),this.getListData(),this.getChartData()},loadwPicker:function(){this.tabList[0].value[0]=this.getYearIndex(),this.tabList[0].value[1]=this.quarter-1},getYearIndex:function(){return this.year-2018},getNowYearQuarter:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,r=e+" "+this.getQuarterDesc(a);return r},getChartData:function(){r.http.get("airReport/getQuarterLineChart",{year:this.year,quarter:this.quarter,fsiteNo:this.orgId},{baseUrl:this.$sys.getApiUrl()}).then(function(t){if(200===t.data.code){var e=[];e=t.data.data.list.map(function(t){return parseInt(t.ftime)});var a=[];a[0]={name:"AQI",data:[]};var i=t.data.data.list.map(function(t){return t.faqi});a[0].data=i||[],r.util.showChartLine("charts",e,a,n)}else r.util.showToast(t.data.msg)})},getListData:function(){r.http.get("airReport/getQuarterAirData",{year:this.year,quarter:this.quarter,fsiteNo:this.orgId},{baseUrl:this.$sys.getApiUrl()}).then(function(t){200===t.data.code?r.listData=t.data.data.list:r.util.showToast(t.data.msg)})},getQuarterDesc:function(t){var e;return t<=3?e="第一季度":t<=6?e="第二季度":t<=9?e="第三季度":t<=12&&(e="第四季度"),e},getQuarterNumber:function(t){switch(t){case"第一季度":return 1;case"第二季度":return 2;case"第三季度":return 3;default:return 4}},goDetail:function(e,a){var r={id:e,orgName:a,date:this.sdate};t.navigateTo({url:"daydata23?detail="+encodeURIComponent(JSON.stringify(r))})},setPageTitle:function(){t.setNavigationBarTitle({title:"".concat(this.sdate," ").concat(this.userInfo.orgName," 空气质量")})}}};e.default=c}).call(this,a("6e42")["default"])}},[["939e","common/runtime","common/vendor"]]]);